import{d as h,c as S,b as i,i as R,k as T,a as l,t as $,r as u,o as Z,w as f,u as r,P as j,S as F,f as y,j as k,e as b,n as J,g as W,$ as v,a0 as O,s as U}from"./index-B0ACGiVO.js";import{_ as q}from"./ConfirmDialog-DCAxoZU1.js";import{s as G,C as K}from"./index-UUY02Ivs.js";const Q=[{id:"1",firstName:"Alice",lastName:"Johnson",fullname:"Alice Johnson",email:"alice.johnson@example.com",phone:"123-456-7890",addressLine1:"123 Maple Street",addressLine2:"",city:"",country:"",state:"",zip:"",additional:"",residenceCard:"sample.pdf",driveLicense:"sample2.pdf",points:80},{id:"2",firstName:"Bob",lastName:"Smith",fullname:"Bob Smith",email:"bob.smith@example.com",phone:"234-567-8901",addressLine1:"456 Oak Avenue",addressLine2:"",city:"",country:"",state:"",zip:"",additional:"",residenceCard:"sample.pdf",driveLicense:"",points:120},{id:"3",firstName:"Charlie",lastName:"Davies",fullname:"Charlie Davies",email:"charlie.davis@example.com",phone:"345-678-9012",addressLine1:"789 Pine Road",addressLine2:"",city:"",country:"",state:"",zip:"",additional:"",residenceCard:"",driveLicense:"sample2.pdf",points:150},{id:"4",firstName:"Diana",lastName:"White",fullname:"Diana White",email:"diana.white@example.com",phone:"456-789-0123",addressLine1:"101 Birch Lane",addressLine2:"",city:"",country:"",state:"",zip:"",additional:"",residenceCard:"sample2.pdf",driveLicense:"sample2.pdf",points:50}],w=[...Q],D={getClients:async(e={},t=null,a=0,s=5)=>{const o=Math.floor(Math.random()*1001)+500;return new Promise(C=>{setTimeout(()=>{let m=[...w];e!=null&&e.expression&&(m=m.filter(d=>!d.firstName||new RegExp(e==null?void 0:e.expression.toLowerCase(),"i").test(d.firstName.toLowerCase())||!d.lastName||new RegExp(e==null?void 0:e.expression.toLowerCase(),"i").test(d.lastName.toLowerCase())||!d.fullname||new RegExp(e==null?void 0:e.expression.toLowerCase(),"i").test(d.fullname.toLowerCase())||!d.email||new RegExp(e==null?void 0:e.expression.toLowerCase(),"i").test(d.email.toLowerCase())||!d.phone||new RegExp(e==null?void 0:e.expression.toLowerCase(),"i").test(d.phone.toLowerCase())));const x=a===0?0:a*s,L=a===0?s:(a+1)*s,g=m.slice(x,L);C({ok:1,total:m.length,data:g})},o)})},deleteClient:async e=>new Promise(t=>{setTimeout(()=>{const a=w.findIndex(s=>s.id===e);if(a!==-1){const s=w.splice(a,1);t({ok:1,message:"Client deleted successfully",data:s})}else t({ok:0,message:"Client not found"})},500)}),deleteClients:async e=>new Promise(t=>{setTimeout(()=>{if(!Array.isArray(e)){t({ok:0,message:"Invalid input. Please provide an array of IDs."});return}const a=[];e.forEach(s=>{const o=w.findIndex(C=>C.id===s);o!==-1&&a.push(...w.splice(o,1))}),a.length>0?t({ok:1,message:`${a.length} client(s) deleted successfully`,data:a}):t({ok:0,message:"No matching clients found"})},500)})},X=["width","height"],Y={__name:"iconFile",props:{size:{type:Number,default:24}},setup(e){return(t,a)=>(h(),S("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"0 0 12 12",fill:"none"},a[0]||(a[0]=[i("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.09467 1.34467C2.23532 1.20402 2.42609 1.125 2.625 1.125H7.125C7.22446 1.125 7.31984 1.16451 7.39016 1.23483L10.0152 3.85984C10.0855 3.93016 10.125 4.02554 10.125 4.125V10.125C10.125 10.3239 10.046 10.5147 9.90533 10.6553C9.76468 10.796 9.57391 10.875 9.375 10.875H2.625C2.42609 10.875 2.23532 10.796 2.09467 10.6553C1.95402 10.5147 1.875 10.3239 1.875 10.125V1.875C1.875 1.67609 1.95402 1.48532 2.09467 1.34467ZM6.96967 1.875L2.625 1.875L2.625 10.125H9.375V4.28033L6.96967 1.875Z",fill:"currentColor"},null,-1),i("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.125 1.125C7.33211 1.125 7.5 1.29289 7.5 1.5V3.75H9.75C9.95711 3.75 10.125 3.91789 10.125 4.125C10.125 4.33211 9.95711 4.5 9.75 4.5H7.125C6.91789 4.5 6.75 4.33211 6.75 4.125V1.5C6.75 1.29289 6.91789 1.125 7.125 1.125Z",fill:"currentColor"},null,-1),i("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.125 6.375C4.125 6.16789 4.29289 6 4.5 6H7.5C7.70711 6 7.875 6.16789 7.875 6.375C7.875 6.58211 7.70711 6.75 7.5 6.75H4.5C4.29289 6.75 4.125 6.58211 4.125 6.375Z",fill:"currentColor"},null,-1),i("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.125 7.875C4.125 7.66789 4.29289 7.5 4.5 7.5H7.5C7.70711 7.5 7.875 7.66789 7.875 7.875C7.875 8.08211 7.70711 8.25 7.5 8.25H4.5C4.29289 8.25 4.125 8.08211 4.125 7.875Z",fill:"currentColor"},null,-1)]),8,X))}},ee={class:"document-tag gap-2 flex"},ae={class:"document-tag-icon flex items-center justify-center"},te={class:"document-tag-name"},ne={__name:"DocumentTag",props:{firstName:String,cardType:{type:String,validator:e=>["residenceCard","driveLicense"].includes(e)}},setup(e){const t=e,a=T(()=>{const s=t.cardType==="residenceCard"?"Residence Card":"License";return`${t.firstName}'s ${s}`});return(s,o)=>(h(),S("div",ee,[i("div",ae,[l(Y,{size:12})]),i("div",te,$(a.value),1)]))}},M=R(ne,[["__scopeId","data-v-106c6e68"]]),se={class:"page page-clients"},le={class:"page-content"},oe={class:"clients-table"},ie={class:"module module-with-scroller module-with-scroller-lg p-1"},de={class:"page-content-top mb-3 pb-1 flex gap-2 flex-wrap"},ce={class:"text-muted"},re={class:"flex gap-2"},ue={class:"page-content-bottom"},Ce={__name:"ClientsView",setup(e){const t=u(""),a=u(!1),s=u(null),o=u([]),C=u([]),m=u(8),x=u(0),L=u(0),g=u(!0),d=({page:n,rows:p})=>{L.value=n,m.value=p,_()},A=n=>{t.value=n,_()},I=n=>{console.log("onEditClient",n)},z=n=>{s.value=n,a.value=!0},E=()=>{s.value=null,a.value=!1},V=()=>{o!=null&&o.value.length?B():P(s.value),E()},B=()=>{const n=o.value.map(p=>p.id);D.deleteClients(n),o.value=[],_()},P=n=>{D.deleteClient(n),_()},_=async()=>{g.value=!0;try{const n=await D.getClients({expression:t==null?void 0:t.value},null,L.value,m.value);if(!n.ok)throw new Error("Failed to load data");C.value=n.data,x.value=n.total}catch(n){n.value=n.message}finally{g.value=!1}};return Z(()=>{_()}),(n,p)=>(h(),S("div",se,[l(j,{title:"Clients"}),i("div",le,[i("div",oe,[l(r(U),null,{content:f(()=>[i("div",ie,[i("div",de,[l(F,{variant:"dark",placeholder:"Search for client",onSearchInput:A,filter:t.value},null,8,["filter"]),o.value.length?(h(),y(b,{key:0,severity:"secondary",label:"Delete selected",size:"small",class:"ml-auto delete-selected-clients",onClick:z})):k("",!0),l(b,{label:"Add client",severity:"primary",size:"small",class:J([o.value.length?"ml-0":"ml-auto","add-new-client"])},null,8,["class"])]),t.value.length&&!C.value.length?(h(),y(r(G),{key:0,severity:"secondary",class:"w-full mt-5 mb-5"},{default:f(()=>p[1]||(p[1]=[W("No clients were found matching your criteria.")])),_:1})):(h(),y(r(O),{key:1,class:"outlined",scrollable:"",selection:o.value,"onUpdate:selection":p[0]||(p[0]=c=>o.value=c),value:C.value,loading:g.value,tableStyle:"min-width: 50rem"},{default:f(()=>[l(r(v),{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(r(v),{field:"fullname",sortable:"",header:"Client"},{body:f(c=>[i("div",null,$(c.data.fullname),1),i("span",ce,$(c.data.email),1)]),_:1}),l(r(v),{field:"phone",sortable:"",header:"Phone"}),l(r(v),{field:"addressLine1",sortable:"",header:"Address"}),l(r(v),{header:"Documents"},{body:f(c=>{var N,H;return[(N=c.data)!=null&&N.residenceCard?(h(),y(M,{key:0,class:"my-1","card-type":"residenceCard",firstName:c.data.firstName},null,8,["firstName"])):k("",!0),(H=c.data)!=null&&H.driveLicense?(h(),y(M,{key:1,class:"my-1","card-type":"driveLicense",firstName:c.data.firstName},null,8,["firstName"])):k("",!0)]}),_:1}),l(r(v),{field:"points",sortable:"",header:"Points"}),l(r(v),{header:"Actions"},{body:f(c=>[i("div",re,[l(b,{size:"small",label:"Edit",outlined:"",onClick:N=>I(c.data)},null,8,["onClick"]),l(b,{size:"small",label:"Delete",outlined:"",onClick:N=>z(c.data.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value","loading"])),i("div",ue,[l(K,{limit:m.value,total:x.value,onPageChange:d},null,8,["limit","total"])])])]),_:1})])]),l(q,{showDialog:a.value,onApplyConfirmation:V,onHide:E},null,8,["showDialog"])]))}};export{Ce as default};
