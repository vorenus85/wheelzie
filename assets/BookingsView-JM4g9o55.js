import{r as o,o as y,c as w,a as s,b as l,w as v,u as p,m as B,d,P as C,S,_ as x,e as P,f as h,g as N,h as V,s as $}from"./index-CISK8WdI.js";import{s as I,C as A}from"./index-CO5YbdnM.js";const E={class:"page page-bookings"},j={class:"page-content"},z={class:"module module-with-scroller module-with-scroller-lg p-1"},F={class:"module-head flex justify-center items-center gap-4"},H={class:"page-content-bottom"},T={__name:"BookingsView",setup(M){const t=o(""),r=o(),c=o(15),g=o(0),m=o(0),u=o(!0),i=async()=>{var a;u.value=!0;try{const e=await B.getBookings({expression:t==null?void 0:t.value,status:(a=n==null?void 0:n.value)==null?void 0:a.name},null,m.value,c.value);if(!e.ok)throw new Error("Failed to load data");r.value=e.data,g.value=e.total}catch(e){e.value=e.message}finally{u.value=!1}},k=({page:a,rows:e})=>{m.value=a,c.value=e,i()},n=o(),_=o({types:[{name:"Returned"},{name:"Ongoing"},{name:"Cancelled"}]}),f=a=>{n.value=a,i()},b=a=>{t.value=a,i()};return y(()=>{i()}),(a,e)=>(d(),w("div",E,[s(C,{title:"Bookings"}),l("div",j,[s(p($),{class:"booking-table-module mt-4"},{content:v(()=>[l("div",z,[l("div",F,[e[0]||(e[0]=l("h3",{class:"module-head-title"},"Car Bookings",-1)),s(S,{placeholder:"Search for car, etc",onSearchInput:b,filter:t.value,class:"ml-auto booking-filter",variant:"dark"},null,8,["filter"]),s(x,{options:_.value.types,selected:n.value,placeholder:"Status",onChangeSort:f,variant:"dark",class:"sort-by-status booking-sort"},null,8,["options","selected"]),s(P,{label:"Add booking",severity:"primary",size:"small",class:"add-booking ml-auto lg:ml-0"})]),t.value.length&&!r.value.length?(d(),h(p(I),{key:0,severity:"secondary",class:"w-full mt-5 mb-5"},{default:v(()=>e[1]||(e[1]=[N("No bookings were found matching your criteria.")])),_:1})):(d(),h(V,{key:1,bookings:r.value,loading:u.value},null,8,["bookings","loading"])),l("div",H,[s(A,{limit:c.value,total:g.value,onPageChange:k},null,8,["limit","total"])])])]),_:1})])]))}};export{T as default};
